(this["webpackJsonpwould-you-rather"]=this["webpackJsonpwould-you-rather"]||[]).push([[0],{29:function(e,t,a){e.exports=a(41)},34:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),s=(a(34),a(12)),l=a(13),i=a(16),u=a(15),m=a(11),d=a(3),p=a(4),b=a(6),v=a(5),h=a(1),E={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://tylermcginnis.com/would-you-rather/sarah.jpg",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://tylermcginnis.com/would-you-rather/tyler.jpg",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://tylermcginnis.com/would-you-rather/dan.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},f={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function O(e){return new Promise((function(t,a){var n=e.author,r=function(e){var t=e.optionOneText,a=e.optionTwoText,n=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:n,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:a}}}(e);setTimeout((function(){f=Object(h.a)(Object(h.a)({},f),{},Object(v.a)({},r.id,r)),E=Object(h.a)(Object(h.a)({},E),{},Object(v.a)({},n,Object(h.a)(Object(h.a)({},E[n]),{},{questions:E[n].questions.concat([r.id])}))),t(r)}),1e3)}))}function j(e){return function(e){var t=e.authedUser,a=e.qid,n=e.answer;return new Promise((function(e,r){setTimeout((function(){E=Object(h.a)(Object(h.a)({},E),{},Object(v.a)({},t,Object(h.a)(Object(h.a)({},E[t]),{},{answers:Object(h.a)(Object(h.a)({},E[t].answers),{},Object(v.a)({},a,n))}))),f=Object(h.a)(Object(h.a)({},f),{},Object(v.a)({},a,Object(h.a)(Object(h.a)({},f[a]),{},Object(v.a)({},n,Object(h.a)(Object(h.a)({},f[a][n]),{},{votes:f[a][n].votes.concat([t])}))))),e()}),500)}))}(e)}function g(){return function(e){return Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(h.a)({},E))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(h.a)({},f))}),1e3)}))]).then((function(e){var t=Object(b.a)(e,2);return{users:t[0],questions:t[1]}})).then((function(t){var a=t.users,n=t.questions;e(function(e){return{type:"RECEIVE_USERS",users:e}}(a)),e(function(e){return{type:"RECEIVE_QUESTIONS",questions:e}}(n))}))}}function w(e){return function(t){return(a=e,O(a)).then((function(e){t(function(e){return{type:"ADD_QUESTION",question:e}}(e)),t(function(e){return{type:"ADD_USER_QUESTION",question:e}}(e))}));var a}}function y(e){return{type:"SET_AUTHED_USER",id:e}}var N=Object(p.b)((function(e){var t=e.users;return{users:Object.values(t)}}),(function(e){return{setAuthedUser:function(t){return e(y(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],c=a[1],s=e.users.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}));return r.a.createElement("div",{className:"signin"},r.a.createElement("div",{className:"signin-header"},r.a.createElement("p",{className:"welcome"},"Welcome to the Would You Rather App!"),r.a.createElement("p",null,"Please sign in to continue")),r.a.createElement("div",{className:"signin-image-holder"},r.a.createElement("img",{className:"signin-image",src:"logo512.png",alt:"logo"})),r.a.createElement("h2",{className:"signin-label"},"Sign In"),r.a.createElement("div",{className:"signin-form"},r.a.createElement("select",{className:"signin-select",onChange:function(e){c(e.target.value)},value:o},r.a.createElement("option",{value:"",defaultValue:"",disabled:!0},"Select User"),s),r.a.createElement("button",{className:"signin-btn",disabled:""===o,onClick:function(t){t.preventDefault(),e.setAuthedUser(o)}},"Sign In")))}));var q=Object(p.b)((function(e){var t=e.authedUser;return{authedUser:e.users[t]}}),(function(e){return{setAuthedUser:function(t){return e(y(t))}}}))((function(e){var t=Object(n.useState)("home"),a=Object(b.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(!0),l=Object(b.a)(s,2),i=l[0],u=l[1],d=e.authedUser,p=function(e){var t=e.target.id;c(t),u(!0)};return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-username"},r.a.createElement("span",null,"Hello, ",d.name),r.a.createElement("span",null,r.a.createElement("img",{src:d.avatarURL,alt:"avatar"}))),r.a.createElement("a",{href:"/#",className:"toggle-button",onClick:function(){u(!i)}},r.a.createElement("span",{className:"bar"}),r.a.createElement("span",{className:"bar"}),r.a.createElement("span",{className:"bar"})),r.a.createElement("div",{className:i?"navbar-links":"navbar-links active"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.b,{id:"home",to:"/",className:"home"===o?"active":null,onClick:p},"Home")),r.a.createElement("li",null,r.a.createElement(m.b,{id:"add",to:"/add",className:"add"===o?"active":null,onClick:p},"New Question")),r.a.createElement("li",null,r.a.createElement(m.b,{id:"leaderboard",to:"/leaderboard",className:"leaderboard"===o?"active":null,onClick:p},"Leader Board")),r.a.createElement("li",null,r.a.createElement(m.b,{id:"logout",to:"/",onClick:function(){e.setAuthedUser(null)}},"Logout")))))})),x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){var t=e.props,a=t.label;(0,t.onClick)(a)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.onClick,t=this.props,a=t.activeTab,n=t.label,o="tab-list-item";return a===n&&(o+=" tab-list-active"),r.a.createElement("li",{className:o,onClick:e},n)}}]),a}(n.Component),T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onClickTabItem=function(e){n.setState({activeTab:e})},n.state={activeTab:n.props.children[0].props.label},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.onClickTabItem,t=this.props.children,a=this.state.activeTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ol",{className:"tab-list"},t.map((function(t){var n=t.props.label;return r.a.createElement(x,{activeTab:a,key:n,label:n,onClick:e})}))),r.a.createElement("div",{className:"tab-content"},t.map((function(e){if(e.props.label===a)return e.props.children}))))}}]),a}(n.Component);var U=Object(d.g)(Object(p.b)((function(e,t){var a=e.questions,n=e.users,r=t.id;return{question:a[r],author:n[a[r].author]}}))((function(e){var t=e.question,a=e.author;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},a.name," asks:"),r.a.createElement("div",{className:"card-img"},r.a.createElement("img",{src:a.avatarURL,alt:"avatar"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"card-content-label"},"Would you rather..."),r.a.createElement("p",null,"...",t.optionOne.text.substr(0,10),"..."),r.a.createElement("div",{className:"card-content-action"},r.a.createElement("button",{onClick:function(){return a=t.id,void e.history.push("/questions/".concat(a));var a}},"View Poll"))))})));var S=Object(p.b)((function(e){var t=e.authedUser,a=e.questions,n=e.users,r=Object.keys(n[t].answers).sort((function(e,t){return a[t].timestamp-a[e].timestamp}));return{unansweredQuestions:Object.keys(a).filter((function(e){return!r.includes(e)})).sort((function(e,t){return a[t].timestamp-a[e].timestamp})),answeredQuestions:r}}))((function(e){var t=e.answeredQuestions,a=e.unansweredQuestions;return r.a.createElement("div",null,r.a.createElement(T,null,r.a.createElement("div",{label:"Unanswered Questions"},0===a.length?"You've answered all the questions.":a.map((function(e){return r.a.createElement(U,{key:e,id:e})}))),r.a.createElement("div",{label:"Answered Questions"},t.map((function(e){return r.a.createElement(U,{key:e,id:e})})))))}));var k=Object(p.b)((function(e,t){var a=e.authedUser,n=e.questions,r=e.users,o=t.id,c=n[o];return{author:r[n[o].author],question:c,user:r[a]}}))((function(e){var t=e.author,a=e.question,n=e.user,o=a.optionOne.votes.length,c=a.optionTwo.votes.length,s=o+c,l=n.answers[a.id],i=(100*o/s).toFixed(2),u=(100*c/s).toFixed(2),m={common:{display:"flex",height:"25px",backgroundColor:"#2fbfa5",borderRadius:"5px",color:"#fff",alignItems:"center",fontSize:"12px",paddingRight:"5px"},optionOne:{width:"".concat(i,"%"),justifyContent:"0.00"===i?"flex-start":"flex-end"},optionTwo:{width:"".concat(u,"%"),justifyContent:"0.00"===u?"flex-start":"flex-end"}};return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},t.name," asks:"),r.a.createElement("div",{className:"card-img"},r.a.createElement("img",{src:t.avatarURL,alt:"avatar"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("ul",{className:"pollresult"},r.a.createElement("li",null,r.a.createElement("h4",null,"Results:")),r.a.createElement("li",null,r.a.createElement("div",{className:"pollresult-question ".concat("optionOne"===l?"your-answer":"other-answer")},"optionOne"===l&&r.a.createElement("div",{className:"vote-badge"},"Your vote"),r.a.createElement("p",null,"Would you rather ",a.optionOne.text,"?"),r.a.createElement("div",{className:"progress-wrapper"},r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{style:Object(h.a)(Object(h.a)({},m.common),m.optionOne)},r.a.createElement("span",null,i,"%")))),r.a.createElement("p",{className:"total-votes"},o," out of ",s," votes"))),r.a.createElement("li",null,r.a.createElement("div",{className:"pollresult-question ".concat("optionTwo"===l?"your-answer":"other-answer")},"optionTwo"===l&&r.a.createElement("div",{className:"vote-badge"},"Your vote"),r.a.createElement("p",null,"Would you rather ",a.optionTwo.text,"?"),r.a.createElement("div",{className:"progress-wrapper"},r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{style:Object(h.a)(Object(h.a)({},m.common),m.optionTwo)},r.a.createElement("span",null,u,"%")))),r.a.createElement("p",{className:"total-votes"},c," out of ",s," votes"))))))}));var C=function(){return r.a.createElement("div",null,"The requested page not found.")};var R=Object(p.b)((function(e,t){var a=e.authedUser,n=e.questions,r=e.users,o=t.match.params.question_id,c=n[o];if(void 0===c)return{questionNotFound:!0};var s,l=r[n[o].author],i=r[a].answers;return i.hasOwnProperty(o)&&(s=i[o]),{authedUser:a,question:c,author:l,answer:s}}),(function(e){return{saveQuestionAnswer:function(t){return e(function(e){var t=e.authedUser,a=e.qid,n=e.answer;return function(e){return j({authedUser:t,qid:a,answer:n}).then((function(){e(function(e,t,a){return{type:"ADD_QUESTION_ANSWER",authedUser:e,qid:t,answer:a}}(t,a,n)),e(function(e,t,a){return{type:"ADD_USER_ANSWER",authedUser:e,qid:t,answer:a}}(t,a,n))}))}}(t))}}}))((function(e){var t=e.question,a=e.author,o=e.answer,c=e.questionNotFound,s=Object(n.useState)(""),l=Object(b.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)(""),d=Object(b.a)(m,2),p=d[0],v=d[1],h=function(e){u(e.target.value)};return c?r.a.createElement("div",{className:"question-details"},r.a.createElement(C,null)):o?r.a.createElement("div",{className:"question-details"},r.a.createElement(k,{id:t.id})):r.a.createElement("div",{className:"question-details"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},a.name," asks:"),r.a.createElement("div",{className:"card-img"},r.a.createElement("img",{src:a.avatarURL,alt:"avatar"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"card-content-label"},"Would you rather..."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("input",{type:"radio",name:"options",value:"optionOne",onChange:h}),r.a.createElement("label",{htmlFor:"options"},t.optionOne.text)),r.a.createElement("li",null,r.a.createElement("input",{type:"radio",name:"options",value:"optionTwo",onChange:h}),r.a.createElement("label",{htmlFor:"options"},t.optionTwo.text)),p&&r.a.createElement("li",null,r.a.createElement("span",{className:"error"},p)),r.a.createElement("li",null,r.a.createElement("div",{className:"card-content-action"},r.a.createElement("button",{onClick:function(t){t.preventDefault();var a=e.authedUser,n=e.question.id,r=e.saveQuestionAnswer;(""!==i||(v("Please select your answer"),0))&&r({authedUser:a,qid:n,answer:i})}},"Submit")))))))})),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderLeaderboard=function(){return e.props.leaderboard.map((function(e){return r.a.createElement("div",{key:e.id,className:"card"},r.a.createElement("div",{className:"card-img"},r.a.createElement("img",{src:e.avatarURL,alt:"avatar"})),r.a.createElement("div",{className:"card-content"},r.a.createElement("ul",{className:"question-numbers"},r.a.createElement("li",null,r.a.createElement("h3",null,e.name)),r.a.createElement("li",{className:"label-counter"},r.a.createElement("span",null,"Answered questions")," ",r.a.createElement("span",{className:"counter"},e.questionsAnswered)),r.a.createElement("li",{className:"label-counter"},r.a.createElement("span",null,"Created questions"),r.a.createElement("span",{className:"counter"}," ",e.questionsCreated)))),r.a.createElement("div",{className:"card-content"},r.a.createElement("ul",{className:"score"},r.a.createElement("li",null,r.a.createElement("p",null,"Score")),r.a.createElement("li",null,r.a.createElement("div",{className:"counter score-badge"},e.score)))))}))},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"leaderboard"},this.renderLeaderboard())}}]),a}(n.Component);var D=Object(p.b)((function(e){var t=e.users;return{leaderboard:Object.values(t).map((function(e){return{id:e.id,avatarURL:e.avatarURL,name:e.name,questionsAnswered:Object.keys(e.answers).length,questionsCreated:e.questions.length,score:Object.keys(e.answers).length+e.questions.length}})).sort((function(e,t){return t.score-e.score}))}}))(A);var _=Object(p.b)((function(e){return{author:e.authedUser}}),(function(e){return{addQuestion:function(t){return e(w(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),l=Object(b.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)(!1),p=Object(b.a)(m,2),v=p[0],h=p[1],E=Object(n.useState)({}),f=Object(b.a)(E,2),O=f[0],j=f[1],g=function(e){"optionOne"===e.target.name&&c(e.target.value),"optionTwo"===e.target.name&&u(e.target.value)};return v?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:"new-question-container"},r.a.createElement("div",{className:"new-question-form"},r.a.createElement("h2",null,"Create New Question"),r.a.createElement("p",null,"Complete the question:"),r.a.createElement("h3",null,"Would you rather..."),r.a.createElement("fieldset",null,r.a.createElement("input",{type:"text",name:"optionOne",value:o,required:!0,placeholder:"Enter Option One Text Here",onChange:g}),O.optionOne&&r.a.createElement("span",{className:"error"},O.optionOne)),r.a.createElement("p",null,r.a.createElement("b",null,"OR")),r.a.createElement("fieldset",null,r.a.createElement("input",{type:"text",name:"optionTwo",value:i,required:!0,placeholder:"Enter Option Two Text Here",onChange:g}),O.optionTwo&&r.a.createElement("span",{className:"error"},O.optionTwo)),r.a.createElement("fieldset",null,r.a.createElement("button",{onClick:function(t){t.preventDefault();var a=e.author,n=e.addQuestion;(function(){var e={},t=!0;return""===o&&(e.optionOne="Please Enter Option One",t=!1),""===i&&(e.optionTwo="Please Enter Option Two",t=!1),j(e),t})()&&(n({author:a,optionOneText:o,optionTwoText:i}),h(!0))}},"Submit"))))})),I=(a(40),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.handleInitialData()}},{key:"render",value:function(){var e=this.props.authedUser;return r.a.createElement(m.a,null,r.a.createElement("div",{className:"app"},e?r.a.createElement(d.b,{render:function(){return r.a.createElement(N,null)}}):r.a.createElement(n.Fragment,null,r.a.createElement(q,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:S}),r.a.createElement(d.b,{path:"/questions/:question_id",component:R}),r.a.createElement(d.b,{path:"/leaderboard",component:D}),r.a.createElement(d.b,{path:"/add",component:_}),r.a.createElement(d.b,{component:C})))))}}]),a}(n.Component));var Q=Object(p.b)((function(e){return{authedUser:null===e.authedUser}}),(function(e){return{handleInitialData:function(){return e(g())}}}))(I),z=a(14);var L=Object(z.c)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHED_USER":return t.id;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USERS":return Object(h.a)(Object(h.a)({},e),t.users);case"ADD_USER_ANSWER":return Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},t.authedUser,Object(h.a)(Object(h.a)({},e[t.authedUser]),{},{answers:Object(h.a)(Object(h.a)({},e[t.authedUser].answers),{},Object(v.a)({},t.qid,t.answer))})));case"ADD_USER_QUESTION":var a=t.question;return Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},a.author,Object(h.a)(Object(h.a)({},e[a.author]),{},{questions:e[a.author].questions.concat(a.id)})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_QUESTIONS":return Object(h.a)(Object(h.a)({},e),t.questions);case"ADD_QUESTION_ANSWER":var a=t.authedUser,n=t.qid,r=t.answer;return Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},Object(v.a)({},r,Object(h.a)(Object(h.a)({},e[n][r]),{},{votes:e[n][r].votes.concat(a)})))));case"ADD_QUESTION":var o=t.question;return Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},o.id,o));default:return e}}}),P=a(28),W=function(e){return function(t){return function(a){console.group(a.type),console.log("The action: ",a);var n=t(a);return console.log("The new state: ",e.getState()),console.groupEnd(),n}}},F=Object(z.a)(P.a,W),H=Object(z.d)(L,F);c.a.render(r.a.createElement(p.a,{store:H},r.a.createElement(Q,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.3f7cc911.chunk.js.map